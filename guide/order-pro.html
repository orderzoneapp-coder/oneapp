<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>오더즈 200% 활용 가이드</title>
    <!-- 카카오톡 등 SNS 공유 시 보여지는 미리보기 정보 (Open Graph) -->
    <meta property="og:title" content="오더즈 200% 활용 꿀팁">
    <meta property="og:description" content="단골특가부터 나만의 리스트 관리까지, 고수의 주문법">
    <meta property="og:image" content="https://oneapp2.godohosting.com/order_guide/slogan.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:type" content="website">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        
        /* 인앱 브라우저 스크롤 및 하단 잘림 방지 */
        html, body {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            width: 100%; height: 100%;
            margin: 0; padding: 0;
            overflow: hidden;
            overscroll-behavior: none;
            font-family: 'Pretendard', sans-serif;
            background-color: #f3f4f6;
            display: flex;
            justify-content: center;
        }
        
        .app-container {
            width: 100%;
            max-width: 400px;
            height: 100%;
            background-color: #ffffff;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* 코치마크 강조 애니메이션 */
        .pulse-gold {
            box-shadow: 0 0 0 0 rgba(250, 204, 21, 0.7);
            animation: pulse-gold-ring 1.5s infinite;
        }

        @keyframes pulse-gold-ring {
            0% { box-shadow: 0 0 0 0 rgba(250, 204, 21, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(250, 204, 21, 0); }
            100% { box-shadow: 0 0 0 0 rgba(250, 204, 21, 0); }
        }

        /* 툴팁 본체 그라데이션 배경 및 부드러운 애니메이션 설정 */
        .tooltip-pro {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            opacity: 0;
            transform: scale(0.95) translateY(10px);
            transition: opacity 0.4s ease, transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), top 0.4s ease, left 0.4s ease;
            pointer-events: none;
        }
        
        /* 활성화 상태 */
        .tooltip-pro.active {
            opacity: 1;
            transform: scale(1) translateY(0);
            pointer-events: auto;
        }

        /* 툴팁 화살표 색상 수정: 배경색과 완벽히 일치하도록 조정 */
        .arrow-bottom::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: var(--arrow-pos, 50%);
            transform: translateX(-50%);
            border-width: 8px 8px 0 8px;
            border-color: #10b981 transparent transparent transparent;
        }
        
        .arrow-top::before {
            content: '';
            position: absolute;
            top: -8px;
            left: var(--arrow-pos, 50%);
            transform: translateX(-50%);
            border-width: 0 8px 8px 8px;
            border-color: transparent transparent #059669 transparent;
        }

        .scroll-area::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>

    <div class="app-container" id="app">
        
        <!-- [페이지 A] 빠른주문 메인 화면 -->
        <div id="page-main" class="flex flex-col h-full w-full absolute inset-0 bg-white">
            <header class="flex justify-between items-center px-3 py-2.5 border-b relative h-12 bg-white z-10">
                <div class="flex items-center gap-2">
                    <i class="fas fa-bars text-lg text-gray-700"></i>
                    <span class="font-bold text-sm">빠른주문</span>
                </div>
                <h1 class="text-[#008c45] text-xl font-black tracking-tighter absolute left-1/2 transform -translate-x-1/2">NH라인</h1>
                <div class="text-xs font-bold text-right flex items-center text-gray-400">0P <i class="fas fa-user-circle text-xl ml-1"></i></div>
            </header>

            <!-- 상단 탭 -->
            <div class="flex items-center border-b border-gray-200 px-2 text-[13px] font-bold bg-white relative z-10">
                <div id="target-sale" class="flex-1 text-center py-3 text-gray-600">
                    <i class="fas fa-star text-yellow-400 mr-1"></i>단골특가
                </div>
                <div id="target-list-tab" class="flex-1 text-center py-3 text-[#008c45] border-b-2 border-[#008c45]">LIST</div>
                <div id="target-my1-tab" class="flex-1 text-center py-3 text-gray-300">MY1</div>
                <div id="target-my2-tab" class="flex-1 text-center py-3 text-gray-300">MY2</div>
                <div id="target-edit-icon" class="px-3 py-3 text-gray-500"><i class="fas fa-sliders-h text-lg"></i></div>
            </div>

            <!-- 정렬 및 배송 정보 -->
            <div id="target-delivery-area" class="flex items-center justify-between px-3 py-2 border-b bg-white text-[13px]">
                <div class="text-gray-800 flex items-center gap-1.5 text-xs font-medium">
                    <i class="far fa-calendar-alt text-[#008c45] text-sm"></i> 1월 12일(월) 도착
                </div>
                <div class="text-gray-500 text-[11px] font-medium flex items-center gap-0.5">
                    최신순 <i class="fas fa-caret-down"></i>
                </div>
            </div>

            <!-- 메인 상품 리스트 -->
            <div class="flex-1 overflow-y-auto scroll-area pb-16" id="main-list-content">
                <div class="flex items-center p-3 border-b">
                    <div class="w-10 h-10 bg-gray-100 rounded mr-3 flex items-center justify-center text-gray-300"><i class="fas fa-image"></i></div>
                    <div class="flex-1">
                        <div class="text-[14px] text-gray-800">무우(낱개)</div>
                        <div class="text-[#008c45] text-[14px]">2,600원</div>
                    </div>
                    <div class="flex items-center border border-gray-200 rounded-lg bg-gray-50 h-7">
                        <button class="w-7 h-7 text-gray-400 font-bold"><i class="fas fa-minus text-[10px]"></i></button>
                        <div class="w-7 text-center font-bold text-[15px] bg-white h-7 flex items-center justify-center border-x border-gray-200">0</div>
                        <button class="w-7 h-7 text-gray-400 font-bold"><i class="fas fa-plus text-[10px]"></i></button>
                    </div>
                </div>
                <div class="flex items-center p-3 border-b">
                    <div class="w-10 h-10 bg-gray-100 rounded mr-3 flex items-center justify-center text-gray-300"><i class="fas fa-image"></i></div>
                    <div class="flex-1">
                        <div class="text-[14px] text-gray-800">양배추(대)42망(3입) <span class="text-gray-400 text-xs">BOX</span></div>
                        <div class="text-[#008c45] text-[14px]">10,900원</div>
                    </div>
                    <div class="flex items-center border border-gray-200 rounded-lg bg-gray-50 h-7">
                        <button class="w-7 h-7 text-gray-400 font-bold"><i class="fas fa-minus text-[10px]"></i></button>
                        <div class="w-7 text-center font-bold text-[15px] bg-white h-7 flex items-center justify-center border-x border-gray-200">0</div>
                        <button class="w-7 h-7 text-gray-400 font-bold"><i class="fas fa-plus text-[10px]"></i></button>
                    </div>
                </div>
                <div class="flex items-center p-3 border-b">
                    <div class="w-10 h-10 bg-gray-100 rounded mr-3 flex items-center justify-center text-gray-300"><i class="fas fa-image"></i></div>
                    <div class="flex-1">
                        <div class="text-[14px] text-gray-800">양파_왕20kg망 <span class="text-gray-400 text-xs">BOX</span></div>
                        <div class="text-[#008c45] text-[14px] flex items-center gap-1">
                            <span class="text-[5px] opacity-70 mt-0.5">●</span> 23,000원
                        </div>
                    </div>
                    <div class="flex items-center border border-gray-200 rounded-lg bg-gray-50 h-7">
                        <button class="w-7 h-7 text-gray-400 font-bold"><i class="fas fa-minus text-[10px]"></i></button>
                        <div class="w-7 text-center font-bold text-[15px] bg-white h-7 flex items-center justify-center border-x border-gray-200">0</div>
                        <button class="w-7 h-7 text-gray-400 font-bold"><i class="fas fa-plus text-[10px]"></i></button>
                    </div>
                </div>
                <div class="flex items-center p-3 border-b">
                    <div class="w-10 h-10 bg-gray-100 rounded mr-3 flex items-center justify-center text-gray-300"><i class="fas fa-image"></i></div>
                    <div class="flex-1">
                        <div class="text-[14px] text-gray-800">깐쪽파(서울)(1kg)단 <span class="text-gray-400 text-xs">EA</span></div>
                        <div class="text-[#008c45] text-[14px] flex items-center gap-1">
                            <span class="text-[5px] opacity-70 mt-0.5">●</span> 9,000원
                        </div>
                    </div>
                    <div class="flex items-center border border-gray-200 rounded-lg bg-gray-50 h-7">
                        <button class="w-7 h-7 text-gray-400 font-bold"><i class="fas fa-minus text-[10px]"></i></button>
                        <div class="w-7 text-center font-bold text-[15px] bg-white h-7 flex items-center justify-center border-x border-gray-200">0</div>
                        <button class="w-7 h-7 text-gray-400 font-bold"><i class="fas fa-plus text-[10px]"></i></button>
                    </div>
                </div>
                <div class="flex items-center p-3 border-b">
                    <div class="w-10 h-10 bg-gray-100 rounded mr-3 flex items-center justify-center text-gray-300"><i class="fas fa-image"></i></div>
                    <div class="flex-1">
                        <div class="text-[14px] text-gray-800">깐마늘大_1kg(그린) <span class="text-gray-400 text-xs">EA</span></div>
                        <div class="text-[#008c45] text-[14px] flex items-center gap-1">
                            <span class="text-[5px] opacity-70 mt-0.5">●</span> 9,300원
                        </div>
                    </div>
                    <div class="flex items-center border border-gray-200 rounded-lg bg-gray-50 h-7">
                        <button class="w-7 h-7 text-gray-400 font-bold"><i class="fas fa-minus text-[10px]"></i></button>
                        <div class="w-7 text-center font-bold text-[15px] bg-white h-7 flex items-center justify-center border-x border-gray-200">0</div>
                        <button class="w-7 h-7 text-gray-400 font-bold"><i class="fas fa-plus text-[10px]"></i></button>
                    </div>
                </div>
            </div>

            <!-- 하단 바 -->
            <div class="h-14 border-t bg-white flex items-center w-full absolute bottom-0 z-10">
                <div id="target-search-area" class="flex-1 flex flex-col items-center justify-center text-gray-500 h-full">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.2" stroke="currentColor" class="w-5 h-5 mb-0.5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                    </svg>
                    <span class="text-[9px]">검색</span>
                </div>
                <div class="w-[200px] flex justify-center px-1">
                    <button class="w-full border border-gray-200 rounded-xl py-1 flex flex-col items-center justify-center bg-white shadow-sm">
                        <span class="text-[#008c45] text-[8px] font-bold tracking-widest leading-none">ORDERZ</span>
                        <span class="text-gray-800 text-[15px] font-medium">상품을 담아주세요</span>
                    </button>
                </div>
                <div id="target-inquiry-area" class="flex-1 flex flex-col items-center justify-center text-gray-500 h-full">
                    <i class="far fa-comment-dots text-lg mb-0.5"></i>
                    <span class="text-[9px]">문의</span>
                </div>
            </div>
        </div>

        <!-- [페이지 B] 편집 페이지 (스르륵 밀려들어오는 애니메이션) -->
        <div id="page-edit" class="flex flex-col h-full w-full absolute inset-0 bg-white z-[15] translate-x-full transition-transform duration-300 ease-out shadow-[-10px_0_20px_rgba(0,0,0,0.05)]">
            <header class="flex justify-between items-center px-3 py-2.5 border-b relative h-12 bg-white">
                <div class="flex items-center gap-2">
                    <i class="fas fa-bars text-lg text-gray-700"></i>
                    <span class="font-bold text-sm">상품목록</span>
                </div>
                <h1 class="text-[#008c45] text-xl font-black tracking-tighter absolute left-1/2 transform -translate-x-1/2">NH라인</h1>
                <div class="text-xs font-bold text-right flex items-center text-gray-400">0P <i class="fas fa-user-circle text-xl ml-1"></i></div>
            </header>

            <div class="flex items-center justify-between px-3 py-2 bg-white">
                <div class="flex gap-2">
                    <span class="px-4 py-1.5 bg-[#2d3748] text-white rounded-full text-xs font-bold shadow-sm">LIST</span>
                    <span class="px-4 py-1.5 bg-white border border-gray-200 text-gray-400 rounded-full text-xs font-bold">MY1</span>
                    <span class="px-4 py-1.5 bg-white border border-gray-200 text-gray-400 rounded-full text-xs font-bold">MY2</span>
                </div>
                <button id="target-save-btn" class="text-[#008c45] font-bold text-[16px] px-2">저장</button>
            </div>

            <div class="flex-1 overflow-y-auto scroll-area border-t border-gray-100 pb-16">
                <!-- 편집 아이템 리스트 (5개) -->
                <div class="flex items-center p-3 border-b relative">
                    <i id="target-trash-icon" class="far fa-trash-alt text-gray-300 text-lg mr-4"></i>
                    <div class="flex-1">
                        <div class="text-[14px] text-gray-800 font-medium">무우(낱개)</div>
                        <div class="text-gray-400 text-[12px]">2,600원</div>
                    </div>
                    <div class="flex gap-2">
                        <div id="target-btn-1" class="w-8 h-8 border border-gray-200 rounded flex items-center justify-center text-gray-400 text-sm font-bold bg-white">1</div>
                        <div id="target-btn-2" class="w-8 h-8 border border-gray-200 rounded flex items-center justify-center text-gray-400 text-sm font-bold bg-white">2</div>
                    </div>
                </div>
                <div class="flex items-center p-3 border-b relative">
                    <i class="far fa-trash-alt text-gray-300 text-lg mr-4"></i>
                    <div class="flex-1">
                        <div class="text-[14px] text-gray-800 font-medium">양배추(대)42망(3입) BOX</div>
                        <div class="text-gray-400 text-[12px]">10,900원</div>
                    </div>
                    <div class="flex gap-2">
                        <div id="target-btn-1" class="w-8 h-8 border border-gray-200 rounded flex items-center justify-center text-gray-400 text-sm font-bold bg-white">1</div>
                        <div id="target-btn-2" class="w-8 h-8 border border-gray-200 rounded flex items-center justify-center text-gray-400 text-sm font-bold bg-white">2</div>
                    </div>
                </div>
                <div class="flex items-center p-3 border-b relative">
                    <i class="far fa-trash-alt text-gray-300 text-lg mr-4"></i>
                    <div class="flex-1">
                        <div class="text-[14px] text-gray-800 font-medium">양파_왕20kg망 BOX</div>
                        <div class="text-gray-400 text-[12px]">23,000원</div>
                    </div>
                    <div class="flex gap-2">
                        <div id="target-btn-1" class="w-8 h-8 border border-gray-200 rounded flex items-center justify-center text-gray-400 text-sm font-bold bg-white">1</div>
                        <div id="target-btn-2" class="w-8 h-8 border border-gray-200 rounded flex items-center justify-center text-gray-400 text-sm font-bold bg-white">2</div>
                    </div>
                </div>
                <div class="flex items-center p-3 border-b relative">
                    <i class="far fa-trash-alt text-gray-300 text-lg mr-4"></i>
                    <div class="flex-1">
                        <div class="text-[14px] text-gray-800 font-medium">깐쪽파(서울)(1kg)단 EA</div>
                        <div class="text-gray-400 text-[12px]">9,000원</div>
                    </div>
                    <div class="flex gap-2">
                        <div id="target-btn-1" class="w-8 h-8 border border-gray-200 rounded flex items-center justify-center text-gray-400 text-sm font-bold bg-white">1</div>
                        <div id="target-btn-2" class="w-8 h-8 border border-gray-200 rounded flex items-center justify-center text-gray-400 text-sm font-bold bg-white">2</div>
                    </div>
                </div>
                <div class="flex items-center p-3 border-b relative">
                    <i class="far fa-trash-alt text-gray-300 text-lg mr-4"></i>
                    <div class="flex-1">
                        <div class="text-[14px] text-gray-800 font-medium">깐마늘大_1kg(그린) EA</div>
                        <div class="text-gray-400 text-[12px]">9,300원</div>
                    </div>
                    <div class="flex gap-2">
                        <div id="target-btn-1" class="w-8 h-8 border border-gray-200 rounded flex items-center justify-center text-gray-400 text-sm font-bold bg-white">1</div>
                        <div id="target-btn-2" class="w-8 h-8 border border-gray-200 rounded flex items-center justify-center text-gray-400 text-sm font-bold bg-white">2</div>
                    </div>
                </div>
            </div>

            <!-- 뒤로가기 버튼 -->
            <div class="p-3 border-t bg-white flex justify-start z-10">
                <button class="bg-gray-100 px-5 py-2 rounded-lg text-gray-600 font-bold text-[13px] border border-gray-200 shadow-sm">뒤로가기</button>
            </div>
        </div>

        <!-- 도입 안내 팝업 -->
        <div id="pro-intro-popup" class="absolute inset-0 bg-black/60 z-[100] flex items-center justify-center backdrop-blur-sm">
            <div class="bg-white rounded-3xl p-8 w-[85%] max-w-[320px] shadow-2xl text-center mt-4">
                <div class="mb-5">
                    <span class="bg-green-50 text-[#008c45] text-[12px] font-extrabold px-3 py-1.5 rounded-full tracking-tight border border-green-200">
                        오더즈 200% 활용법
                    </span>
                </div>
                
                <h2 class="text-[23px] font-bold text-gray-900 mb-4 leading-tight tracking-tight break-keep flex items-center justify-center gap-1.5">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-[#008c45] -mt-1">
                        <circle cx="12" cy="13" r="8"></circle>
                        <path d="M12 9v4l2 2"></path>
                        <path d="M5 3 2 6"></path>
                        <path d="m22 6-3-3"></path>
                        <path d="M6.38 18.7 4 21"></path>
                        <path d="M17.64 18.67 20 21"></path>
                    </svg>
                    발주 시간을 절반으로!
                </h2>
                
                <p class="text-gray-500 text-sm mb-8 leading-relaxed">
                    리스트에 상품이 너무 많아 찾기 힘드셨나요?<br>이제 고수들만 아는 팁을 알려드릴게요.
                </p>
                <button onclick="startProGuide()" class="w-full bg-[#008c45] text-white font-bold py-4 rounded-2xl shadow-lg text-[16px]">
                    꿀팁 확인하기
                </button>
            </div>
        </div>

        <!-- 코치마크 레이어 -->
        <div id="pro-overlay" class="absolute inset-0 z-50 overflow-hidden" style="display: none;">
            <svg width="100%" height="100%" class="absolute inset-0 pointer-events-none z-10">
                <mask id="hole-mask-pro">
                    <rect width="100%" height="100%" fill="white" />
                    <g id="mask-holes-pro"></g>
                </mask>
                <rect width="100%" height="100%" fill="rgba(0,0,0,0.7)" mask="url(#hole-mask-pro)" />
            </svg>
            <div id="spotlight-pro" class="absolute inset-0 pointer-events-none z-20"></div>
            
            <div id="tip-tooltip" class="absolute z-30 w-[305px] tooltip-pro text-white rounded-2xl shadow-2xl p-5 flex flex-col transition-all duration-300">
                <div class="flex items-center gap-2 mb-2.5">
                    <span class="bg-yellow-400 text-emerald-900 text-[11px] font-black px-2 py-0.5 rounded-md">TIP</span>
                    <h3 id="tip-title" class="font-bold text-[19px] text-yellow-400 tracking-tight"></h3>
                </div>
                <p id="tip-desc" class="text-[15px] leading-relaxed break-keep opacity-95 mb-5"></p>
                <div class="flex justify-between items-center border-t border-white/20 pt-4">
                    <div id="tip-dots" class="flex gap-1.5"></div>
                    <button id="pro-next-btn" onclick="nextProStep()" class="bg-white text-[#059669] font-bold px-5 py-2 rounded-xl text-[14px] shadow-md">
                        다음 <i class="fas fa-chevron-right ml-1 text-xs"></i>
                    </button>
                </div>
            </div>
        </div>

    </div>

    <script>
        const proSteps = [
            {
                targetIds: ['target-sale'],
                title: '식자재비 아끼는 맞춤 특가',
                desc: '평소 사던 상품의 <b>알짜배기 대체품을 확인하고 오늘 발주 금액을 낮춰보세요!</b> 주문 전 <b>단골특가 확인은 필수!</b>',
                pos: 'bottom'
            },
            {
                targetIds: ['target-my1-tab', 'target-my2-tab'],
                title: '나만의 리스트',
                desc: '리스트가 길어 찾기 힘들다면? <b>내 주방 환경에 맞춰 \'야채칸\', \'냉동고\'처럼 탭을 나눠보세요.</b> 헷갈리지 않고 주문이 훨씬 빨라져요.',
                pos: 'bottom'
            },
            {
                targetIds: ['target-edit-icon'],
                title: '나만의 리스트 관리',
                desc: '<b>내 마음대로 리스트를 정리</b>할 수 있어요. 안 쓰는 상품은 지우고, 원하는 탭으로 분류해 보세요.',
                pos: 'bottom',
                btnText: '편집 이동',
                action: () => {
                    return new Promise(resolve => {
                        const pageEdit = document.getElementById('page-edit');
                        pageEdit.classList.remove('translate-x-full');
                        setTimeout(resolve, 350); 
                    });
                }
            },
            {
                targetIds: ['target-btn-1', 'target-btn-2'],
                title: '나만의 리스트 지정',
                desc: '1, 2 버튼을 눌러 각각 MY1, MY2 탭으로 쏙! 아주 쉽게 리스트를 분류할 수 있어요.',
                pos: 'bottom'
            },
            {
                targetIds: ['target-save-btn'],
                title: '변경사항 저장하기',
                desc: '정리가 끝났다면 꼭 변경사항을 저장해주세요! 이제 깔끔하게 나뉜 탭에서 고민 없이 바로 주문하세요.',
                pos: 'bottom'
            }
        ];

        let currentProStep = 0;
        let isAnimating = false;

        function renderTipDots(activeIndex) {
            const dots = document.getElementById('tip-dots');
            dots.innerHTML = '';
            proSteps.forEach((_, i) => {
                const opacity = i === activeIndex ? 'bg-white' : 'bg-white/30';
                dots.innerHTML += `<div class="w-1.5 h-1.5 rounded-full ${opacity}"></div>`;
            });
        }

        function showProStep(index) {
            const step = proSteps[index];
            const maskHoles = document.getElementById('mask-holes-pro');
            const spotlight = document.getElementById('spotlight-pro');
            const tooltip = document.getElementById('tip-tooltip');
            const appRect = document.getElementById('app').getBoundingClientRect();
            
            // 툴팁을 잠시 투명하게 만들어서 위치 변경 시 튀는 현상 방지
            tooltip.classList.remove('active');
            
            maskHoles.innerHTML = '';
            spotlight.innerHTML = '';
            let lastRect = null;

            step.targetIds.forEach(id => {
                const el = document.getElementById(id);
                if(!el) return;
                const rect = el.getBoundingClientRect();
                const pad = 2;
                const top = rect.top - appRect.top - pad;
                const left = rect.left - appRect.left - pad;
                const width = rect.width + (pad * 2);
                const height = rect.height + (pad * 2);

                maskHoles.innerHTML += `<rect x="${left}" y="${top}" width="${width}" height="${height}" rx="8" fill="black" />`;
                spotlight.innerHTML += `<div class="absolute border-2 border-yellow-400 rounded-lg pulse-gold" style="top:${top}px; left:${left}px; width:${width}px; height:${height}px;"></div>`;
                lastRect = { rect, top, left, width, height };
            });

            document.getElementById('tip-title').innerText = step.title;
            document.getElementById('tip-desc').innerHTML = step.desc;
            renderTipDots(index);

            const nextBtn = document.getElementById('pro-next-btn');
            if (step.btnText) {
                nextBtn.innerHTML = `${step.btnText} <i class="fas fa-chevron-right ml-1 text-xs"></i>`;
            } else if (index === proSteps.length - 1) {
                nextBtn.innerHTML = '시작하기';
            } else {
                nextBtn.innerHTML = '다음 <i class="fas fa-chevron-right ml-1 text-xs"></i>';
            }

            tooltip.classList.remove('arrow-bottom', 'arrow-top');

            // 위치 계산
            if (step.pos === 'bottom') {
                tooltip.style.top = `${lastRect.top + lastRect.height + 15}px`;
                tooltip.classList.add('arrow-top');
            } else {
                // 이 예시 코드에는 top 포지션이 없지만 확장을 위해 유지
                const tHeight = tooltip.offsetHeight || 150;
                tooltip.style.top = `${lastRect.top - tHeight - 15}px`;
                tooltip.classList.add('arrow-bottom');
            }
            
            let tLeft = (lastRect.left + lastRect.width/2) - 152.5;
            tLeft = Math.max(10, Math.min(appRect.width - 315, tLeft));
            tooltip.style.left = `${tLeft}px`;
            
            const arrowPos = (lastRect.left + lastRect.width/2) - tLeft;
            tooltip.style.setProperty('--arrow-pos', `${arrowPos}px`);

            // 브라우저가 위치 갱신을 인지한 후 애니메이션 활성화
            requestAnimationFrame(() => {
                tooltip.classList.add('active');
            });
        }

        async function nextProStep() {
            if (isAnimating) return;
            isAnimating = true;

            const tooltip = document.getElementById('tip-tooltip');
            
            // 다음 단계로 넘어가기 전 말풍선 숨기기
            tooltip.classList.remove('active');
            
            if (proSteps[currentProStep].action) {
                document.getElementById('mask-holes-pro').innerHTML = '';
                document.getElementById('spotlight-pro').innerHTML = '';
                
                const result = proSteps[currentProStep].action();
                if (result instanceof Promise) {
                    await result;
                }
            } else {
                // 애니메이션 효과를 위해 짧은 대기
                await new Promise(r => setTimeout(r, 100));
            }
            
            if (currentProStep < proSteps.length - 1) {
                currentProStep++;
                showProStep(currentProStep);
            } else {
                window.location.href = "https://orderz.kr/shop/wishlist.php";
            }
            isAnimating = false;
        }

        function startProGuide() {
            document.getElementById('pro-intro-popup').style.display = 'none';
            document.getElementById('pro-overlay').style.display = 'block';
            showProStep(0);
        }

        window.onload = () => {};
    </script>
</body>
</html>
