<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- [추가] 브라우저 자동 번역 제안 차단 -->
    <meta name="google" content="notranslate">
    <title>오더즈 - 식자재 주문의 새로운 기준</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f3f4f6; }
        :root { 
            --brand-primary: #14682A; 
            --brand-hover: #0f5220; 
            --box-bg: #f8fafc; 
            --required-color: #f472b6;
        }
        /* [Layout] */
        .check-container { 
            max-width: 480px; margin: 0 auto; background-color: #ffffff; 
            min-height: 100vh; /* 스크롤 가능하도록 min-height 사용 */
            display: flex; flex-direction: column;
            padding: 0 24px; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); position: relative; 
        }
        
        /* Inputs */
        .input-focus:focus { outline: none; border-color: var(--brand-primary); box-shadow: 0 0 0 1px var(--brand-primary); background-color: #fff; }
        .input-box-style { background-color: var(--box-bg); }
        .placeholder-required::placeholder { color: #9ca3af; font-weight: 400; }

        /* Buttons */
        .btn-brand { background-color: var(--brand-primary); color: white; }
        .btn-brand:hover { background-color: var(--brand-hover); }
        
        /* Animations */
        .fade-in { animation: fadeIn 0.6s ease-out forwards; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .hidden-step { display: none; opacity: 0; }
        .show-step { display: block; animation: fadeInUp 0.5s ease-out forwards; }

        /* Label Style */
        .custom-label {
            font-size: 14px; font-weight: 700; color: #1f2937; margin-bottom: 6px; display: block;
        }
        .required-dot { color: #ef4444; margin-left: 2px; }
    </style>
</head>
<body>

    <div class="check-container pb-20"> <!-- 하단 여백 충분히 확보 -->
        
        <!-- [Header] 버전 정보 표시 (시뮬레이션 전용) -->
        <div class="absolute top-6 right-6 z-10 flex items-center gap-2">
            <span class="text-[10px] text-gray-400 font-mono tracking-tighter">v2.4 (Style Update)</span>
        </div>

        <!-- [상단] 브랜딩 영역 -->
        <div class="pt-16 pb-8 text-center fade-in">
            <!-- ORDERZ [굵은, 작게] -->
            <h1 class="text-base font-bold text-[#14682A] tracking-tight cursor-pointer mb-2 notranslate" translate="no" onclick="location.reload()">ORDERZ</h1>
            
            <!-- 오더즈가 기억합니다 [가장 크게] -->
            <h2 class="text-3xl font-extrabold text-gray-900 mb-2 leading-tight">오더즈가 기억합니다</h2>
            
            <!-- 서브 문구 [진회색, 크게] -->
            <!-- [수정] text-xs -> text-lg, text-[#14682A] -> text-gray-600 -->
            <p class="text-lg text-gray-600 font-medium">내 방식대로, 쓸수록 손에 익는 플랫폼</p>
        </div>

        <!-- 여백 -->
        <div class="h-6"></div>

        <!-- [상단2] 타이틀 및 입력 폼 영역 -->
        <form id="marketingForm" onsubmit="return false;" class="flex-1 flex flex-col">
            
            <div class="mb-8 fade-in" style="animation-delay: 0.2s;">
                <h3 class="text-lg font-bold text-gray-800 mb-1">주소 기반 상품 매칭</h3>
                <p class="text-sm text-[#14682A]">사장님 지역의 특가 상품을 지금 확인해보세요.</p>
            </div>

            <!-- 1. 가게 주소 (가장 먼저 노출) -->
            <div id="step-address" class="mb-8 fade-in" style="animation-delay: 0.4s;">
                <label class="custom-label">가게 주소 (배송지) <span class="required-dot">*</span></label>
                <div class="flex gap-2 mb-2">
                    <input type="hidden" id="mb_zip">
                    <!-- 입력창 클릭 시 테스트 데이터 자동 입력 -->
                    <input type="text" id="mb_addr1" 
                        class="flex-1 px-4 py-3.5 border border-gray-200 rounded-lg input-box-style text-gray-800 text-sm input-focus cursor-pointer placeholder-required"
                        placeholder="입력창 클릭 시 테스트 주소 자동 입력" readonly onclick="fillTestAddress()">
                    <!-- 검색 버튼 클릭 시 실제 우편번호 서비스 호출 -->
                    <button type="button" onclick="openDaumPostcode()" 
                        class="px-5 py-3.5 btn-brand text-sm font-bold rounded-lg transition whitespace-nowrap shadow-sm">
                        검색
                    </button>
                </div>
                <input type="text" id="mb_addr2" 
                    class="w-full px-4 py-3.5 border border-gray-200 rounded-lg input-box-style input-focus text-sm transition-colors hidden"
                    placeholder="상세주소를 입력해주세요 (예: 1층)">
            </div>

            <!-- 2. 상세 정보 입력 그룹 (주소 입력 후 동시 노출) -->
            <div id="step-details" class="hidden-step">
                
                <!-- 상호명 -->
                <div class="mb-6">
                    <label class="custom-label" for="mb_company">상호명 <span class="required-dot">*</span></label>
                    <input type="text" id="mb_company" 
                        class="w-full px-4 py-3.5 border border-gray-200 rounded-lg input-box-style input-focus transition-colors text-sm placeholder-required"
                        placeholder="상호명을 입력하세요">
                </div>

                <!-- 휴대폰 번호 -->
                <div class="mb-10">
                    <label class="custom-label" for="mb_phone">휴대폰 번호 <span class="required-dot">*</span></label>
                    <input type="tel" id="mb_phone" 
                        class="w-full px-4 py-3.5 border border-gray-200 rounded-lg input-box-style input-focus transition-colors text-sm placeholder-required"
                        placeholder="010-0000-0000" oninput="autoHyphen(this);" maxlength="13">
                </div>

                <!-- [상품 보러 가기] 버튼 -->
                <div class="mt-auto">
                    <button type="button" onclick="submitForm()"
                        class="w-full py-4 btn-brand rounded-lg font-bold text-[16px] shadow-md transition hover:bg-[#0f5220] transform active:scale-[0.98]">
                        상품 보러 가기
                    </button>
                </div>
            </div>

        </form>
    </div>

    <!-- [성공 팝업] -->
    <div id="toast-overlay" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center hidden opacity-0 transition-opacity duration-300">
        <div class="bg-white rounded-xl p-6 w-[320px] text-center shadow-2xl transform scale-100 transition-transform relative">
            <div class="w-12 h-12 bg-green-50 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-xl"><i class="fas fa-check"></i></div>
            <h3 class="text-lg font-bold text-gray-800 mb-2">확인되었습니다!</h3>
            <div class="text-sm text-gray-600 mb-5 leading-relaxed break-keep">매칭된 특가 상품 페이지로<br>이동합니다.</div>
            <div class="w-full bg-gray-200 rounded-full h-1.5 overflow-hidden mb-2">
                <div class="bg-green-500 h-full w-0 transition-all duration-[1500ms] ease-out" id="progress-bar"></div>
            </div>
        </div>
    </div>

    <script>
        // --- Step Control Logic ---

        // 1. [기존 로직] 검색 버튼 클릭 시 실제 카카오 주소 API 호출
        function openDaumPostcode() {
            if (typeof daum === 'undefined') { 
                alert("우편번호 서비스 로딩 중입니다. 잠시만 기다려주세요."); 
                return; 
            }
            new daum.Postcode({
                oncomplete: function(data) {
                    var addr = data.userSelectedType === 'R' ? data.roadAddress : data.jibunAddress;
                    if(data.userSelectedType === 'J' && !addr){ addr = data.autoJibunAddress; }
                    
                    document.getElementById('mb_zip').value = data.zonecode;
                    const addrInput = document.getElementById('mb_addr1');
                    addrInput.value = addr;
                    addrInput.classList.add('text-gray-900', 'font-medium');
                    
                    finishAddressStep();
                }
            }).open();
        }

        // 2. [시뮬레이션 로직] 주소 입력창 클릭 시 테스트 데이터 즉시 입력
        function fillTestAddress() {
            const testAddr = "서울특별시 강남구 테헤란로 427";
            const testZip = "06159";
            
            document.getElementById('mb_zip').value = testZip;
            const addrInput = document.getElementById('mb_addr1');
            addrInput.value = testAddr;
            addrInput.classList.add('text-gray-900', 'font-medium');
            
            finishAddressStep();
        }

        // 주소 입력 완료 후 공통 후처리
        function finishAddressStep() {
            const addr2 = document.getElementById('mb_addr2');
            addr2.classList.remove('hidden');
            
            const stepDetails = document.getElementById('step-details');
            if (!stepDetails.classList.contains('show-step')) {
                stepDetails.classList.remove('hidden-step');
                stepDetails.classList.add('show-step');
                
                setTimeout(() => {
                    addr2.focus(); // 상세주소로 포커스 이동
                    stepDetails.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 300);
            } else {
                addr2.focus();
            }
        }

        // 휴대폰 번호 자동 하이픈
        function autoHyphen(target) {
            target.value = target.value.replace(/[^0-9]/g, '').replace(/^(\d{0,3})(\d{0,4})(\d{0,4})$/g, "$1-$2-$3").replace(/(\-{1,2})$/g, "");
        }

        // 최종 제출
        function submitForm() {
            const company = document.getElementById('mb_company').value.trim();
            const addr1 = document.getElementById('mb_addr1').value.trim();
            const phone = document.getElementById('mb_phone').value.trim();

            if(!addr1) { alert("주소를 검색해주세요."); return; }
            if(!company) { 
                alert("상호명을 입력해주세요."); 
                document.getElementById('mb_company').focus(); 
                return; 
            }
            if(!phone || phone.length < 10) { 
                alert("올바른 휴대폰 번호를 입력해주세요."); 
                document.getElementById('mb_phone').focus();
                return; 
            }

            // 성공 애니메이션 및 페이지 전환 시뮬레이션
            const toast = document.getElementById('toast-overlay');
            const bar = document.getElementById('progress-bar');
            
            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.remove('opacity-0'), 10);
            
            setTimeout(() => { bar.style.width = "100%"; }, 100);
            
            setTimeout(() => {
                const nextUrl = new URLSearchParams(window.location.search).get('next_url') || 'https://orderz.kr/shop/';
                alert(`[시스템 이동] ${nextUrl} 로 이동합니다.`);
                window.location.reload(); 
            }, 1600);
        }
    </script>
</body>
</html>
